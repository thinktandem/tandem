# Process

This should contain guides around the Tandem process, specifically around project and product lifecycles.

## Contributing Code

Tandem follows a slightly modified [GitHub Flow](https://guides.github.com/introduction/flow/) pattern. The basics are

### 1. Open a new branch from master

::: tip Tandem Tip
Construct your branch as `ISSUENUMBER-BRIEFDESCRIPTION`. For example `10-addHomepage`.
:::

```bash
# Checkout a new branch from master
git checkout master && git checkout -b 10-addHomepage
```

### 2. Add commits and push branch

::: tip Tandem Tip
Prefix your commits with the issue number and they will automatically be surfaced in the corresponding issue and PR
:::

```bash
# Add some commits
git add somefile
git commit -m "#10: Added the file"
git add .
git commit -m "#10: Refactored code to obey with our code standards"

# Push the commits and branch
git push origin 10-addHomepage
```

### 3. Test Locally

Do a quick pass locally to make sure things work the way they should. Essentially, you want to catch anything obvious so that the person QAing your code doesn't end up resenting you. ;) At the same time you don't want to spend _tons_ of time making sure it's perfect because that is the point of QA.

**The 80/20 principle is a good rule to use here.**

You should also consult the _Testing_ section of your project's README as it likely contains instructions on how to run automated tests. _Generally,_ these can be invoked with a simple:

```bash
lando test
```

### 4. Open a pull request

When you are feeling like your code is ready for prime time you will want to [open a pull request](https://help.github.com/articles/creating-a-pull-request/).

![Branch example](/images/tres-guides.png)

You will notice

### 5. Assign someone to review

stuff


### 6. Make any requested changes







## QAing Code

https://help.github.com/en/articles/requesting-a-pull-request-review

These are all the GitHub PR based QA mechanism that we use

1.  Follow any checklists that are auto-generated by the pull request
2.  Wait for any automated tests (Travis-CI/CircleCI), or manual QA (platform envs, code review) to pass.
3.  Merge the code into `master`. * This is typically done by a technical project lead.
4.  Delete the issue branch `ISSUENUMBER-BRIEFDESCRIPTION`. * This is typically done by a technical project lead.

**NEVER EVER EVER EVER PUSH ANYTHING DIRECTLY TO THE MASTER BRANCH!!!**

Some details may vary on a project to project basis. Every project has a its own documentation typically starting with the README.md and project variances in process will be documented there.  For example for projects using Platform.sh as the host in step 2 you would branch from `test` as `test` is the canonical branch for Platform.sh based projects, where Pantheon uses `master` as canonical.


### GitHub Based Manual Code Review

After working on a feature linked to an issue.

* Push up your feature branch and file a Pull Request (PR)
* Assign the PR to your deploy lead
* The deploy lead will look at the PR either:
  * Approve and merge it to `test` for client QA from there the deploy will handle getting the feature to production
  * Find some issues or improvements that can be made; then
    * These findings can be discussed in daily project standup to determine next action steps
    * Findings requests for remediation can be made in text against the PR and developer takes action on them

### QA Environments

* Each feature branch that is filed as a PR spins up a QA environment on Platform.sh
* Once you file the PR
  * Update the GitHub issue
    * Paste in the PR URL
    * Paste in the Platform.sh QA env URL
    * Describe what the feature does
      * If special steps are required for testing/review indicate them
    * Assign to a team deploy lead
    * Move issue card on ZenHub to the Needs Review / Ready for QA column geoff

### Automated Travis/Circle Testing

* Linting/Code Standards
  * For Drupal projects we follow the [Drupal Coding Standards](https://www.drupal.org/docs/develop/standards/coding-standards)
  * For Laravel and PHP we follow [PSR2 Standard](http://www.php-fig.org/psr/psr-2/)
  * For NodeJS we follow [Node.js Style Guide](https://github.com/felixge/node-style-guide)
* Unit Testing
* Functional testing
* Tests can and should be run locally and clean up any outstanding issues reported
  * This can usually be done with `lando composer test`
  * In the event that you file a PR and it does not pass tests.  Take the initiative to fix it up and push up the cleaned up code

### In-Development QA mechanisms

* Peer review
  * If you are unsure of requirements, best path forward, or you find yourself in a rabbit hole reach out to another developer on the team to get plan and a path forward
* Pair programming
  * If you are working on a new tech stack or new problem you might choose to pair up and work on a problem together
